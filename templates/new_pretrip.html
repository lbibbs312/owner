{% extends "base.html" %}
{% block content %}
<div class="container" style="font-size: 0.7rem;">
  <h2 class="mt-4 mb-3">New PreTrip Inspection</h2>

  <form method="POST" action="">
    {{ form.hidden_tag() }}

    <!-- Intro instructions -->
    <p>Please check all items that apply. Fields connected to the actual PreTrip model are saved; 
       others are purely visual. Decrease your browser zoom or scroll if items overflow.</p>

    <!-- 1) PRETRIP METADATA -->
    <div class="row mb-2">
      <div class="col-md-4">
        {{ form.pretrip_date.label }}<br>
        {{ form.pretrip_date(class="form-control form-control-sm") }}
      </div>
      <div class="col-md-2">
        {{ form.shift.label }}<br>
        {{ form.shift(class="form-select form-select-sm") }}
      </div>
      <div class="col-md-3">
        {{ form.truck_type.label }}<br>
        {{ form.truck_type(class="form-select form-select-sm") }}
      </div>
      <div class="col-md-3">
        {{ form.truck_name.label }}<br>
        {{ form.truck_name(class="form-control form-control-sm") }}
      </div>
    </div>

    <div class="row mb-2">
      <div class="col-md-3">
        {{ form.start_mileage.label }}<br>
        {{ form.start_mileage(class="form-control form-control-sm") }}
      </div>
    </div>

    <hr>

    <!-- 2) GENERAL CONDITION -->
    <h5>General Condition</h5>
    <div class="form-check">
      {{ form.cab_doors_windows(class="form-check-input") }}
      {{ form.cab_doors_windows.label(class="form-check-label") }}
    </div>
    <div class="form-check">
      {{ form.body_doors(class="form-check-input") }}
      {{ form.body_doors.label(class="form-check-label") }}
    </div>
    <div class="form-check">
      {{ form.oil_leak(class="form-check-input") }}
      {{ form.oil_leak.label(class="form-check-label") }}
    </div>
    <div class="form-check">
      {{ form.grease_leak(class="form-check-input") }}
      {{ form.grease_leak.label(class="form-check-label") }}
    </div>
    <div class="form-check">
      {{ form.coolant_leak(class="form-check-input") }}
      {{ form.coolant_leak.label(class="form-check-label") }}
    </div>
    <div class="form-check">
      {{ form.fuel_leak(class="form-check-input") }}
      {{ form.fuel_leak.label(class="form-check-label") }}
    </div>

    <!-- These next two checkboxes are purely visual; not in the model -->
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="gc_other" id="gc_other">
      <label class="form-check-label" for="gc_other">Other (Identify)</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="gc_no_defects" id="gc_no_defects">
      <label class="form-check-label" for="gc_no_defects">No Defects</label>
    </div>

    <hr>

    <!-- 3) IN-CAB (EXAMPLE; not in the PreTrip DB) -->
    <h5>In-Cab</h5>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="gauges_ok" id="gauges_ok">
      <label class="form-check-label" for="gauges_ok">Gauges/Warning Indicators</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="wipers_ok" id="wipers_ok">
      <label class="form-check-label" for="wipers_ok">Windshield Wipers/Washers</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="horn_ok" id="horn_ok">
      <label class="form-check-label" for="horn_ok">Horn</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="heater_defrost_ok" id="heater_defrost_ok">
      <label class="form-check-label" for="heater_defrost_ok">Heater/Defroster</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="mirrors_ok" id="mirrors_ok">
      <label class="form-check-label" for="mirrors_ok">Mirrors</label>
    </div>
    <!-- etc. (steering, clutch, etc.) -->
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="ic_no_defects" id="ic_no_defects">
      <label class="form-check-label" for="ic_no_defects">No Defects</label>
    </div>

    <hr>

    <!-- 4) ENGINE COMPARTMENT -->
    <h5>Engine Compartment</h5>
    <p>These checkboxes are examples; the DBâ€™s actual fields are only oil/coolant/fuel, etc.</p>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="oil_level_ok" id="oil_level_ok">
      <label class="form-check-label" for="oil_level_ok">Oil Level</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="coolant_level_ok" id="coolant_level_ok">
      <label class="form-check-label" for="coolant_level_ok">Coolant Level</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="radiator_ok" id="radiator_ok">
      <label class="form-check-label" for="radiator_ok">Radiator</label>
    </div>

    <!-- Oil system stored in DB -->
    <div class="mb-2 mt-2">
      {{ form.oil_system_status.label }}<br>
      {{ form.oil_system_status(class="form-select form-select-sm") }}
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="ec_no_defects" id="ec_no_defects">
      <label class="form-check-label" for="ec_no_defects">No Defects</label>
    </div>

    <hr>

    <!-- 5) EXTERIOR -->
    <h5>Exterior</h5>
    <!-- 'lights_working' is in the DB; 'reflectors_ok' is just an example -->
    <div class="form-check">
      {{ form.lights_working(class="form-check-input") }}
      {{ form.lights_working.label(class="form-check-label") }}
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="reflectors_ok" id="reflectors_ok">
      <label class="form-check-label" for="reflectors_ok">Reflectors</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="suspension_ok" id="suspension_ok">
      <label class="form-check-label" for="suspension_ok">Suspension</label>
    </div>
    <!-- 'tires_ok' is in the DB -->
    <div class="form-check">
      {{ form.tires_ok(class="form-check-input") }}
      {{ form.tires_ok.label(class="form-check-label") }}
    </div>
    <div class="mb-2 mt-2">
      {{ form.tires_status.label }}<br>
      {{ form.tires_status(class="form-select form-select-sm") }}
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="ext_no_defects" id="ext_no_defects">
      <label class="form-check-label" for="ext_no_defects">No Defects</label>
    </div>

    <hr>

    <!-- 6) TOWED UNIT(S) -->
    <h5>Towed Unit(s)</h5>
    <p>(Not in DB by default, just for visual checks.)</p>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="towed_bodydoors" id="towed_bodydoors">
      <label class="form-check-label" for="towed_bodydoors">Body/Doors</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="towed_tiedowns" id="towed_tiedowns">
      <label class="form-check-label" for="towed_tiedowns">Tie-Downs</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="towed_lights" id="towed_lights">
      <label class="form-check-label" for="towed_lights">Lights</label>
    </div>
    <div class="form-check">
      <input type="checkbox" class="form-check-input" name="towed_no_defects" id="towed_no_defects">
      <label class="form-check-label" for="towed_no_defects">No Defects</label>
    </div>

    <hr>

    <!-- 7) DAMAGE REPORT (in the DB) -->
    <div class="mb-3">
      {{ form.damage_report.label }}<br>
      {{ form.damage_report(class="form-control form-control-sm", rows="2") }}
    </div>

    <!-- 8) SHOP REMARKS (not in DB) -->
    <div class="mb-3">
      <label class="form-label">Shop Remarks:</label>
      <textarea name="shop_remarks" rows="2" class="form-control form-control-sm"></textarea>
    </div>

    <!-- 9) MAINTENANCE ACTION (not in DB) -->
    <div class="mb-3">
      <label class="form-label">Maintenance Action:</label><br>
      <input type="checkbox" name="maint_repairs" id="maint_repairs"> Repairs Made &nbsp;
      <input type="checkbox" name="maint_none" id="maint_none"> No Repairs Needed
      <br>
      R.O.#s: <input type="text" name="ro_nums" size="8">
      &nbsp; Certified By: <input type="text" name="cert_by" size="8">
      &nbsp; Location: <input type="text" name="location" size="8">
    </div>

    <!-- 10) REVIEWING DRIVER & DATE (prefilled) -->
    <div class="mb-3">
      <label>Reviewing Driver:</label>
      <input type="text" name="reviewing_driver" size="14"
             value="{{ current_user.username if current_user else '' }}">
      (Emp. No: <input type="text" name="reviewing_empno" size="6">)
      Date: <input type="text" name="reviewing_date" size="10"
             value="{{ today_date|default('') }}">
    </div>

    <!-- 11) SUBMIT -->
    {{ form.submit(class="btn btn-primary btn-sm mt-3", value="Save PreTrip") }}
  </form>
</div>
{% endblock %}
